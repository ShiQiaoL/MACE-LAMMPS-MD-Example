# H2O simulation

units         metal
dimension	3
boundary	p p p
atom_style	 atomic 
atom_modify   map yes
newton        on
 
neighbor	   1.0    bin
neigh_modify	 every 20  delay 0  check no

#  potentials
read_data   OOD-SR.data

# 1. 定义上、下两个 slab 的几何区域（用 z = 20 Å 举例）
#region  top  block EDGE EDGE EDGE EDGE  111.53  120  units box
#region  bot  block EDGE EDGE EDGE EDGE  10   23.3484  units box

# 2. 把处于这些区域的原子划到组
#group   top_atoms  region top
#group   bot_atoms  region bot
#group   boundary subtract all top_atoms bot_atoms

# 3. 让它们“冻结”——受力恒为零
#fix     freeze_top top_atoms setforce 0.0 0.0 0.0
#fix     freeze_bot bot_atoms setforce 0.0 0.0 0.0

# 4. 如果后续要做动力学，最好把它们的初始速度也清零
#velocity top_atoms set 0.0 0.0 0.0
#velocity bot_atoms set 0.0 0.0 0.0


pair_style mace no_domain_decomposition
#pair_coeff * * ~/mace-ft-tutorial-main/out/graphene-water/results/mace-ft-tutorial-main-3/mace-ft-tutorial-main-3_run-3_epoch-149_swa.pt  C O H
pair_coeff * * mace-mpa-0-medium.model-lammps.pt  Li Ga Cl F

#read_data   rbmd.data
# define groups
###group  water   type  1 2


#shake 
#fix   H2O1  water  shake  1.0e-4 1000 50000 b 1 a 1


# initial velocities
velocity     all create  298   4928459 rot yes dist gaussian


# run
variable      dt    equal 0.001       #1fs
timestep	 ${dt}

# fixes

#fix     1      all   nve
#fix     2      all temp/berendsen  298  298  $(100*dt)
fix      1      all  nvt    temp 298 298    $(100*dt)


#output
#compute  RDF
compute  myRDF  all   rdf    100  1 1  2 2  1 2   
fix      myRDF  all ave/time 10  100  1000 c_myRDF[*] file rdf.txt mode vector

#compute MSD

compute  mymsd  all  msd      com yes average yes
fix      mymsd  all  ave/time 10  100  1000  c_mymsd[*] file msd.txt 


#
thermo		 1
thermo_style  custom step temp  press pe  ke etotal  

dump		1   all  custom  100  dump.lammpstrj  id element x y z 
dump_modify	1   sort id    element Li Ga Cl F

restart 2000 *.data
run		200000

write_data dump_20ps.data

#write data file
#write_data    H2O_300_v.data

